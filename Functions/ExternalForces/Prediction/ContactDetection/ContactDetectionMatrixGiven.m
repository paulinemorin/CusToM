function [Contact_detection] = ContactDetectionMatrixGiven(filename, AnalysisParameters)
%   INPUT
%   - filename: name of the file to process (character string)
%   - AnalysisParameters: parameters of the musculoskeletal analysis,
%   automatically generated by the graphic interface 'Analysis' 
%   - BiomechanicalModel: musculoskeletal model
%   - ModelParameters: parameters of the musculoskeletal model, automatically
%   generated by the graphic interface 'GenerateParameters' 
%   OUTPUT
%   - ContactDetectionThreeshold: results of the detection
%   of contact (see the Documentation for the structure)
%________________________________________________________
%
% Licence
% Toolbox distributed under GPL 3.0 Licence
%________________________________________________________
%
% Authors : Antoine Muller, Charles Pontonnier, Pierre Puchaud, Pauline Morin and
% Georges Dumont
%________________________________________________________

%% Loading data
load([filename '/InverseKinematicsResults.mat']); %#ok<LOAD>
q = InverseKinematicsResults.JointCoordinates';

nbframe=size(q,1);
NbPointsPrediction = numel(AnalysisParameters.Prediction.ContactPoint);

%% Contact detection
Contact_detection = load(AnalysisParameters.Prediction.ContactDetectionFile);
if size(Contact_detection,1)~=NbPointsPrediction
    error('Incorrect number of prediction points in detection matrix (lines)')
elseif size(Contact_detection,2)~=nbframe
    error('Incorrect number of frames in detection matrix (columns)')
end

end


